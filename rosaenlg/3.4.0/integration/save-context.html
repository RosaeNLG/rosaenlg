<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- vue -->
    <script src="../../../_/js/vendor/vue.min.js"></script>

    <!-- codemirror -->
    <script src="../../../_/js/vendor/codemirror.js"></script>
    <script src="../../../_/js/vendor/vue-codemirror.js"></script>
    <script src="../../../_/js/vendor/pug.js"></script>
    <script src="../../../_/js/vendor/javascript.js"></script>

    <!-- editor -->
    <script src="../../../_/js/vendor/editor-3.4.0.js"></script>


    <title>Save context from one call to another :: RosaeNLG // Docs</title>
    <link rel="canonical" href="https://rosaenlg.github.io/rosaenlg/rosaenlg/4.2.1/integration/save-context.html">
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../../_/css/site.css">

    <!-- prevent favicon request -->
    <link rel="icon" href="data:,">   

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">

    <div class="navbar-brand">
      <div class="navbar-item">
        <a class="navbar-item" href="https://rosaenlg.github.io/rosaenlg">RosaeNLG // Docs</a>
      </div>



      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>

    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Project</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/RosaeNLG/rosaenlg">Main Repository</a>
            <a class="navbar-item" href="https://github.com/RosaeNLG/rosaenlg/issues">Core Issue Traker</a>
            <a class="navbar-item" href="https://github.com/RosaeNLG">Related projects</a>
          </div>
        </div>
        <a class="navbar-item" href="https://rosaenlg.org/ide/index.html">Try now!</a>
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="rosaenlg" data-version="3.4.0">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">RosaeNLG</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../changelog.html">Changelog</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../quickstart.html">Quick Start</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../dev_experience.html">Developer experience</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../tutorials/intro.html">Tutorials and Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/tutorial_en_US.html">English Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/tutorial_fr_FR.html">French Tutorial (en Fran√ßais !)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/tutorial_de_DE.html">German Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/example_fr_FR.html">French example</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/example_en_US.html">English example</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="integration.html">Integration, node.js, Java, Docker etc.</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="project_generator.html">RosaeNLG node.js project generator using Yeoman</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rosaenlg_packager.html">Packaging templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="browser_intro.html">In the Browser</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="browser_rendering.html">Rendering</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="browser_compiling.html">Compiling</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="browser_ide.html">Browser IDE</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Command Line Interface</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="rosaenlg-cli.html">CLI module</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="docker-cli.html">Docker image for CLI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="node-server.html">Node.js Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="lambda.html">AWS Lambda</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Java Wrapper and Server</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="java-wrapper.html">Java Wrapper</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="java-server.html">Java Server and Docker Server</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="testing.html">Testing with mocha and mochawesome</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Misc</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="rosaenlg-no-pug.html">Usage without templates</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="save-context.html">Save context between calls</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="observable.html">Integration in Observable HQ</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../mixins_ref/intro.html">Reference Documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../mixins_ref/value.html">Value</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/value_numbers.html">Numbers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/value_dates.html">Dates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/value_nominal_groups.html">Nominal Groups</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/value_simplified_syntax.html">Simplified Syntax</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/referring_expression.html">Referring Expressions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/adjectives.html">Adjectives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/eachz_itemz.html">Eachz and Itemz</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/synonyms.html">Synonyms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../mixins_ref/sentences.html">Sentences (beta)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/sentences_english.html">English</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/sentences_french.html">French</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../mixins_ref/verbs.html">Verbs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/verbs_english.html">English</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/verbs_french.html">French</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/verbs_german.html">German</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/verbs_italian.html">Italian</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/verbs_spanish.html">Spanish</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/possessives.html">Possessives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/recordSaid.html">hasSaid / recordSaid</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/filter.html">Filter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/dict.html">Dictionnary</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/otherAndHelpers.html">Other and Helpers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/debugging.html">Debugging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/multilingual.html">Multilingual Templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/node_js_versions.html">Node.js compatibility</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../libs/libs.html">Libraries</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../libs/countries.html">Countries</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">About NLG and RosaeNLG</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/nlg.html">What is NLG?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/advanced_nlg_examples.html">Advanced examples of NLG features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/usecases.html">NLG usecases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/about.html">About RosaeNLG, the Author</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/support.html">Support, Hosting, Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/features.html">Main Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/compare.html">Compare with CoreNLG and xSpin</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/other_languages.html">Other Languages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/yseop.html">Yseop Template Generator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/performance.html">Performance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/related_projects.html">Related Projects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/params.html">Global Parameters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/howitworks.html">How it works</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/pug.html">Why Pug?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/random.html">Random Numbers (and why it matters)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/filter.html">Filter mechanism</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/resources.html">Linguistic resources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/logo.html">Logo</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">RosaeNLG</span>
    <span class="version">3.4.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">RosaeNLG</span>
      <ul class="versions">
        <li class="version">
          <a href="../../4.2.1/index.html">4.2.1</a>
        </li>
        <li class="version">
          <a href="../../4.2.0/index.html">4.2.0</a>
        </li>
        <li class="version">
          <a href="../../4.1.0/index.html">4.1.0</a>
        </li>
        <li class="version">
          <a href="../../4.0.0/index.html">4.0.0</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">3.4.0</a>
        </li>
        <li class="version">
          <a href="../../3.3.1/index.html">3.3.1</a>
        </li>
        <li class="version">
          <a href="../../3.3.0/index.html">3.3.0</a>
        </li>
        <li class="version">
          <a href="../../3.2.6/index.html">3.2.6</a>
        </li>
        <li class="version">
          <a href="../../3.2.5/index.html">3.2.5</a>
        </li>
        <li class="version">
          <a href="../../3.2.4/index.html">3.2.4</a>
        </li>
        <li class="version">
          <a href="../../3.2.3/index.html">3.2.3</a>
        </li>
        <li class="version">
          <a href="../../3.2.2/index.html">3.2.2</a>
        </li>
        <li class="version">
          <a href="../../3.2.1/index.html">3.2.1</a>
        </li>
        <li class="version">
          <a href="../../3.2.0/index.html">3.2.0</a>
        </li>
        <li class="version">
          <a href="../../3.1.2/index.html">3.1.2</a>
        </li>
        <li class="version">
          <a href="../../3.1.1/index.html">3.1.1</a>
        </li>
        <li class="version">
          <a href="../../3.1.0/index.html">3.1.0</a>
        </li>
        <li class="version">
          <a href="../../3.0.4/index.html">3.0.4</a>
        </li>
        <li class="version">
          <a href="../../3.0.3/index.html">3.0.3</a>
        </li>
        <li class="version">
          <a href="../../3.0.2/index.html">3.0.2</a>
        </li>
        <li class="version">
          <a href="../../3.0.1/index.html">3.0.1</a>
        </li>
        <li class="version">
          <a href="../../3.0.0/index.html">3.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../../4.2.1/index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../index.html">RosaeNLG</a></li>
    <li class="crumb"><a href="integration.html">Integration, node.js, Java, Docker etc.</a></li>
    <li class="crumb">Misc</li>
    <li class="crumb"><a href="save-context.html">Save context between calls</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="versions-menu-toggle" title="Show other versions of page">3.4.0</button>
  <div class="versions-menu">
    <a class="version" href="../../4.2.1/integration/save-context.html">4.2.1</a>
    <a class="version" href="../../4.2.0/integration/save-context.html">4.2.0</a>
    <a class="version" href="../../4.1.0/integration/save-context.html">4.1.0</a>
    <a class="version" href="../../4.0.0/integration/save-context.html">4.0.0</a>
    <a class="version is-current" href="save-context.html">3.4.0</a>
    <a class="version" href="../../3.3.1/integration/save-context.html">3.3.1</a>
    <a class="version" href="../../3.3.0/integration/save-context.html">3.3.0</a>
    <a class="version is-missing" href="../../3.2.6/index.html">3.2.6</a>
    <a class="version is-missing" href="../../3.2.5/index.html">3.2.5</a>
    <a class="version is-missing" href="../../3.2.4/index.html">3.2.4</a>
    <a class="version is-missing" href="../../3.2.3/index.html">3.2.3</a>
    <a class="version is-missing" href="../../3.2.2/index.html">3.2.2</a>
    <a class="version is-missing" href="../../3.2.1/index.html">3.2.1</a>
    <a class="version is-missing" href="../../3.2.0/index.html">3.2.0</a>
    <a class="version is-missing" href="../../3.1.2/index.html">3.1.2</a>
    <a class="version is-missing" href="../../3.1.1/index.html">3.1.1</a>
    <a class="version is-missing" href="../../3.1.0/index.html">3.1.0</a>
    <a class="version is-missing" href="../../3.0.4/index.html">3.0.4</a>
    <a class="version is-missing" href="../../3.0.3/index.html">3.0.3</a>
    <a class="version is-missing" href="../../3.0.2/index.html">3.0.2</a>
    <a class="version is-missing" href="../../3.0.1/index.html">3.0.1</a>
    <a class="version is-missing" href="../../3.0.0/index.html">3.0.0</a>
  </div>
</div>
</div>
<article class="doc">

<h1>Save context from one call to another</h1>
<div class="oldversion">
This is the documentation for 3.4.0 version, which is not the latest version. Consider upgrading to <a href="../../4.2.1/integration/save-context.html">4.2.1</a>.
</div>
<div class="paragraph">
<p>For some specific cases, you need to run the same template multiples times, with possibly different input data, <strong>but keeping the context from one run to another</strong>: keeping the state of which synonyms were triggered, of which referring expressions were already used, etc.</p>
</div>
<div class="paragraph">
<p>While most RosaeNLG usages will not require this, a typical usage would be chatbots.</p>
</div>
<div class="paragraph">
<p>The context is put in the parameters object. It is changed while running the template, and available after the run. You can simply reuse the same object, just changing some input parameters if you wish so.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const templateHasSaid = `
mixin bla
  if !hasSaid('BLA')
    | blabla
    recordSaid('BLA')
  else
    | other

+bla
`;

const compiled = rosaenlgPug.compile(templateHasSaid, {
  language: 'en_US',
});

const options1 = {
  util: new NlgLib({
    language: 'en_US',
  }),
};
const rendered1 = compiled(options1);
// will be 'Blabla'

// see how options1 is reused here
// some user level parameters can be changed before this subsequent call
const rendered2 = compiled(options1);
// will be 'Other'

const rendered3 = compiled(options1);
// will be 'Other'</code></pre>
</div>
</div>
<div class="paragraph">
<p>More complete examples are available in the test suite. See <code>saveState.js</code> source file.</p>
</div>
<div class="paragraph">
<p>Triggered references are kept using the pointer to the real object, so you must keep the same object from one call to another (and not reload it etc. - but you may change some of its properties).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The parameters object, while reusable from one call to another, can probably not be serialized.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Thanks Timon Felske, Sebastian Bader, Thomas Kirste for the original idea, as described in link:https://link.springer.com/article/10.1007/s13218-022-00765-7, though implementation might differ.</p>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>RosaeNLG is a Sandbox Project of <a href="https://lfaidata.foundation/">LF AI &amp; Data Foundation</a>. RosaeNLG is licensed under Apache 2.0, and its documentation under CC-BY-4.0. The documentation was built with Antora using a fork of the Antora default UI licensed under MPL-2.0, and search is using the Antora Lunr Extension under MPL-2.0.</p>
</footer><script src="../../../_/js/site.js"></script>
<script src="../../../_/js/vendor/highlight.js"></script>
<script>hljs.highlightAll()</script>

  </body>
</html>
