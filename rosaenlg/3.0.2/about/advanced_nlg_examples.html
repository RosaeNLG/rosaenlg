<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- vue -->
    <script src="../../../_/js/vendor/vue.min.js"></script>

    <!-- codemirror -->
    <script src="../../../_/js/vendor/codemirror.js"></script>
    <script src="../../../_/js/vendor/vue-codemirror.js"></script>
    <script src="../../../_/js/vendor/pug.js"></script>
    <script src="../../../_/js/vendor/javascript.js"></script>

    <!-- editor -->
    <script src="../../../_/js/vendor/editor-3.0.2.js"></script>


    <title>Advanced examples of NLG features :: RosaeNLG // Docs</title>
    <link rel="canonical" href="https://rosaenlg.github.io/rosaenlg/rosaenlg/4.1.0/about/advanced_nlg_examples.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
<meta name="docsearch:version" content="3.0.2" />

    <!-- prevent favicon request -->
    <link rel="icon" href="data:,">
    
    <link 
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">

    <div class="navbar-brand">
      <div class="navbar-item">
        <a class="navbar-item" href="https://rosaenlg.github.io/rosaenlg">RosaeNLG // Docs</a>
      </div>


      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>

    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Project</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/RosaeNLG/rosaenlg">Main Repository</a>
            <a class="navbar-item" href="https://github.com/RosaeNLG/rosaenlg/issues">Core Issue Traker</a>
            <a class="navbar-item" href="https://github.com/RosaeNLG">Related projects</a>
          </div>
        </div>
        <a class="navbar-item" href="https://rosaenlg.org/ide/index.html">Try now!</a>
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="rosaenlg" data-version="3.0.2">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">RosaeNLG</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../changelog.html">What&#8217;s New in RosaeNLG</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../quickstart.html">Quick Start</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../dev_experience.html">Developer experience</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../tutorials/intro.html">Tutorials and Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/tutorial_en_US.html">English Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/tutorial_fr_FR.html">French Tutorial (en Français !)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/tutorial_de_DE.html">German Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/example_fr_FR.html">French example</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorials/example_en_US.html">English example</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../integration/integration.html">Integration, node.js, Java, Docker etc.</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integration/project_generator.html">RosaeNLG node.js project generator using Yeoman</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integration/rosaenlg_packager.html">Packaging templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../integration/browser_intro.html">In the Browser</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integration/browser_rendering.html">Rendering</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integration/browser_compiling.html">Compiling</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integration/browser_ide.html">Browser IDE</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Command Line Interface</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integration/rosaenlg-cli.html">CLI module</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integration/docker-cli.html">Docker image for CLI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integration/node-server.html">Node.js Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integration/lambda.html">AWS Lambda</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Java Wrapper and Server</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integration/java-wrapper.html">Java Wrapper</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integration/java-server.html">Java Server and Docker Server</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integration/testing.html">Testing with mocha and mochawesome</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Misc</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integration/rosaenlg-no-pug.html">Usage without templates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integration/observable.html">Integration in Observable HQ</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../mixins_ref/intro.html">Reference Documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../mixins_ref/value.html">Value</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/value_numbers.html">Numbers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/value_dates.html">Dates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/value_nominal_groups.html">Nominal Groups</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/value_simplified_syntax.html">Simplified Syntax</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/referring_expression.html">Referring Expressions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/adjectives.html">Adjectives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/eachz_itemz.html">Eachz and Itemz</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/synonyms.html">Synonyms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../mixins_ref/verbs.html">Verbs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/verbs_english.html">English</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/verbs_french.html">French</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/verbs_german.html">German</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/verbs_italian.html">Italian</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins_ref/verbs_spanish.html">Spanish</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/possessives.html">Possessives</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/recordSaid.html">hasSaid / recordSaid</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/filter.html">Filter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/dict.html">Dictionnary</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/otherAndHelpers.html">Other and Helpers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/debugging.html">Debugging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/multilingual.html">Multilingual Templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mixins_ref/node_js_versions.html">Node.js compatibility</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../libs/libs.html">Libraries</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../libs/countries.html">Countries</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">About NLG and RosaeNLG</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nlg.html">What is NLG?</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="advanced_nlg_examples.html">Advanced examples of NLG features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="usecases.html">NLG usecases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="about.html">About RosaeNLG, the Author</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="support.html">Support, Hosting, Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="features.html">Main Features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compare.html">Compare with CoreNLG and xSpin</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/other_languages.html">Other Languages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/yseop.html">Yseop Template Generator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/performance.html">Performance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/related_projects.html">Related Projects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/params.html">Global Parameters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/howitworks.html">How it works</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/pug.html">Why Pug?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/random.html">Random Numbers (and why it matters)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/filter.html">Filter mechanism</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/resources.html">Linguistic resources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../advanced/logo.html">Logo</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">RosaeNLG</span>
    <span class="version">3.0.2</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">RosaeNLG</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../4.1.0/index.html">4.1.0</a>
        </li>
        <li class="version">
          <a href="../../4.0.0/index.html">4.0.0</a>
        </li>
        <li class="version">
          <a href="../../3.4.0/index.html">3.4.0</a>
        </li>
        <li class="version">
          <a href="../../3.3.1/index.html">3.3.1</a>
        </li>
        <li class="version">
          <a href="../../3.3.0/index.html">3.3.0</a>
        </li>
        <li class="version">
          <a href="../../3.2.6/index.html">3.2.6</a>
        </li>
        <li class="version">
          <a href="../../3.2.5/index.html">3.2.5</a>
        </li>
        <li class="version">
          <a href="../../3.2.4/index.html">3.2.4</a>
        </li>
        <li class="version">
          <a href="../../3.2.3/index.html">3.2.3</a>
        </li>
        <li class="version">
          <a href="../../3.2.2/index.html">3.2.2</a>
        </li>
        <li class="version">
          <a href="../../3.2.1/index.html">3.2.1</a>
        </li>
        <li class="version">
          <a href="../../3.2.0/index.html">3.2.0</a>
        </li>
        <li class="version">
          <a href="../../3.1.2/index.html">3.1.2</a>
        </li>
        <li class="version">
          <a href="../../3.1.1/index.html">3.1.1</a>
        </li>
        <li class="version">
          <a href="../../3.1.0/index.html">3.1.0</a>
        </li>
        <li class="version">
          <a href="../../3.0.4/index.html">3.0.4</a>
        </li>
        <li class="version">
          <a href="../../3.0.3/index.html">3.0.3</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">3.0.2</a>
        </li>
        <li class="version">
          <a href="../../3.0.1/index.html">3.0.1</a>
        </li>
        <li class="version">
          <a href="../../3.0.0/index.html">3.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../../4.1.0/index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../index.html">RosaeNLG</a></li>
    <li class="crumb">About NLG and RosaeNLG</li>
    <li class="crumb"><a href="advanced_nlg_examples.html">Advanced examples of NLG features</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="versions-menu-toggle" title="Show other versions of page">3.0.2</button>
  <div class="versions-menu">
    <a class="version" href="../../4.1.0/about/advanced_nlg_examples.html">4.1.0</a>
    <a class="version" href="../../4.0.0/about/advanced_nlg_examples.html">4.0.0</a>
    <a class="version" href="../../3.4.0/about/advanced_nlg_examples.html">3.4.0</a>
    <a class="version" href="../../3.3.1/about/advanced_nlg_examples.html">3.3.1</a>
    <a class="version" href="../../3.3.0/about/advanced_nlg_examples.html">3.3.0</a>
    <a class="version" href="../../3.2.6/about/advanced_nlg_examples.html">3.2.6</a>
    <a class="version" href="../../3.2.5/about/advanced_nlg_examples.html">3.2.5</a>
    <a class="version" href="../../3.2.4/about/advanced_nlg_examples.html">3.2.4</a>
    <a class="version" href="../../3.2.3/about/advanced_nlg_examples.html">3.2.3</a>
    <a class="version" href="../../3.2.2/about/advanced_nlg_examples.html">3.2.2</a>
    <a class="version" href="../../3.2.1/about/advanced_nlg_examples.html">3.2.1</a>
    <a class="version" href="../../3.2.0/about/advanced_nlg_examples.html">3.2.0</a>
    <a class="version" href="../../3.1.2/about/advanced_nlg_examples.html">3.1.2</a>
    <a class="version" href="../../3.1.1/about/advanced_nlg_examples.html">3.1.1</a>
    <a class="version" href="../../3.1.0/about/advanced_nlg_examples.html">3.1.0</a>
    <a class="version" href="../../3.0.4/about/advanced_nlg_examples.html">3.0.4</a>
    <a class="version" href="../../3.0.3/about/advanced_nlg_examples.html">3.0.3</a>
    <a class="version is-current" href="advanced_nlg_examples.html">3.0.2</a>
    <a class="version" href="../../3.0.1/about/advanced_nlg_examples.html">3.0.1</a>
    <a class="version" href="../../3.0.0/about/advanced_nlg_examples.html">3.0.0</a>
  </div>
</div>
</div>
<article class="doc">

<h1>Advanced examples of NLG features</h1>
<div class="oldversion">
This is the documentation for 3.0.2 version, which is not the latest version. Consider upgrading to <a href="../../4.1.0/about/advanced_nlg_examples.html">4.1.0</a>.
</div>
<div class="sect1">
<h2 id="_management_of_empty_elements_and_itemz"><a class="anchor" href="#_management_of_empty_elements_and_itemz"></a>Management of empty elements and <code>itemz</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>RosaeNLG automatically detects empty elements in <code>itemz</code> structures. This is hugely useful to avoid sentences finishing with <em>and.</em> when the last element was not triggered.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take an example. The last element of the list <em>has a large battery</em> is triggered by a condition: the phone must have a large battery.</p>
</div>
<div class="paragraph">
<p>With RosaeNLG:</p>
</div>
<script>
spawnEditor('en_US',
`
mixin printPhone
  span
    | the phone
    itemz { separator:',', last_separator:'and', end:'.'}
      item
        | has a 6 inches screen
      item
        | exists in red and in black
      item
        if phone.bigBattery
          | has a large battery

div
  - let phone = { bigBattery: false };
  | #[+printPhone()]
  - phone = { bigBattery: true };
  | #[+printPhone()]
`, '<div><span>The phone has a 6 inches screen and exists in red and in black.</span><span> The phone has a 6 inches screen, exists in red and in black and has a large battery. </span></div>'
);
</script>
<div class="paragraph">
<p>Only using Pug&#8217;s features:</p>
</div>
<script>
spawnEditor('en_US',
`
mixin printPhone
  span
    | the phone
    | has a 6 inches screen,
    | exists in red and in black
    if phone.bigBattery
      | and has a large battery.

div
  - let phone = { bigBattery: false };
  | #[+printPhone()]
  - phone = { bigBattery: true };
  | #[+printPhone()]
`, '<div><span>The phone has a 6 inches screen, exists in red and in black</span><span>the phone has a 6 inches screen, exists in red and in black and has a large battery. </span></div>'
);
</script>
<div class="paragraph">
<p>The first sentence doesn&#8217;t have an <code>.</code> at its end, and has no <code>and</code> between the two elements.</p>
</div>
<div class="paragraph">
<p>Only using Pug&#8217;s features, more sophisticated:</p>
</div>
<script>
spawnEditor('en_US',
`
mixin printPhone
  span
    | the phone
    | has a 6 inches screen
    if phone.bigBattery
      | ,
    else
      |  and
    | exists in red and in black
    if phone.bigBattery
      | and has a large battery
    |.

div
  - let phone = { bigBattery: false };
  | #[+printPhone()]
  - phone = { bigBattery: true };
  | #[+printPhone()]
`, '<div><span>The phone has a 6 inches screen and exists in red and in black.</span><span> The phone has a 6 inches screen, exists in red and in black and has a large battery. </span></div>'
);
</script>
<div class="paragraph">
<p>You now have an <em>business condition</em> triggering <em>syntax</em> - which not a good practice at all:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>if phone.bigBattery
  | ,
else
  |  and</pre>
</div>
</div>
<div class="paragraph">
<p>You have to care to put the <code>|.</code> at the right place.</p>
</div>
<div class="paragraph">
<p>The template is less readable as you don&#8217;t put an explicit structure on what you list.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enumeration_and_punctuation"><a class="anchor" href="#_enumeration_and_punctuation"></a>Enumeration and punctuation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s keep the same example, but we want, when there is a large battery, to end the sentence with a <code>!</code>.</p>
</div>
<div class="paragraph">
<p>With RosaeNLG:</p>
</div>
<script>
spawnEditor('en_US',
`
mixin printPhone
  span
    | the phone
    itemz { separator:',', last_separator:'and', end:'.'}
      item
        | has a 6 inches screen
      item
        | exists in red and in black
      item
        if phone.bigBattery
          | has a large battery!

div
  - let phone = { bigBattery: false };
  | #[+printPhone()]
  - phone = { bigBattery: true };
  | #[+printPhone()]
`, '<div><span>The phone has a 6 inches screen and exists in red and in black.</span><span> The phone has a 6 inches screen, exists in red and in black and has a large battery! </span></div>'
);
</script>
<div class="paragraph">
<p>You can see that we ended the second sentence with <em>has a large battery!</em>: a <code>.</code> was not added after the <code>!</code>. This is completely automatic.</p>
</div>
<div class="paragraph">
<p>Only using Pug&#8217;s features, more sophisticated (as it is an automatic filtering feature, we must add the <code>protect</code> tag to simulate Pug&#8217;s original behaviour):</p>
</div>
<script>
spawnEditor('en_US',
`
mixin printPhone
  span
    | the phone
    | has a 6 inches screen
    if phone.bigBattery
      | ,
    else
      |  and
    | exists in red and in black
    if phone.bigBattery
      | and has a large battery!
    |.

div
  protect
    - let phone = { bigBattery: false };
    | #[+printPhone()]
    - phone = { bigBattery: true };
    | #[+printPhone()]
`, 'battery!.'
);
</script>
<div class="paragraph">
<p>It is a mess:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>we don&#8217;t have capitalization of sentences no more</p>
</li>
<li>
<p>there is a <code>!.</code></p>
</li>
<li>
<p>there is a missing space in <code>screen,exists</code></p>
</li>
<li>
<p>there are undesirable line feeds</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_utility_of_hassaid_and_recordsaid"><a class="anchor" href="#_utility_of_hassaid_and_recordsaid"></a>Utility of <code>hasSaid</code> and <code>recordSaid</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you need to keep track of what was said to influence the production of the next texts, the most straightforward approach for a developer is to use plain variables, here a boolean called <code>SAID_BATTERY</code>:</p>
</div>
<script>
spawnEditor('en_US',
`- let SAID_BATTERY = false;

mixin printPhone
  span
    | the phone
    itemz { separator:',', last_separator:'and', end:'.', mix: true}
      item
        | has a 6 inches screen
        if !SAID_BATTERY
          | along with a battery of 3300 mAh
          - SAID_BATTERY = true;
      item
        | exists in red and in black
      item
        if !SAID_BATTERY
          | has a battery of 3300 mAh
          - SAID_BATTERY = true;

div
  | #[+printPhone()]
  - SAID_BATTERY = false;
  | #[+printPhone()]
`, 'phone'
);
</script>
<div class="paragraph">
<p>It may randomly produce these texts, which are not correct:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>The phone, has a 6 inches screen and exists in red and in black.</em>: there is a strange comma, and we do not talk at all about the battery</p>
</li>
<li>
<p><em>The phone exists in red and in black, and has a 6 inches screen.</em>: battery is not mentionned at all, and there is a strange <code>, and</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is because RosaeNLG tests if texts are empty or not before producing them for real. When this test is performed, the variables are changed, but RosaeNLG is not able to properly roll back.</p>
</div>
<div class="paragraph">
<p>You must use <code>recordSaid</code> and <code>hasSaid</code> to safely record states:</p>
</div>
<script>
spawnEditor('en_US',
`mixin printPhone
  span
    | the phone
    itemz { separator:',', last_separator:'and', end:'.', mix: true}
      item
        | has a 6 inches screen
        if !hasSaid('BATTERY')
          | along with a battery of 3300 mAh
          recordSaid('BATTERY')
      item
        | exists in red and in black
      item
        if !hasSaid('BATTERY')
          | has a battery of 3300 mAh
          recordSaid('BATTERY')

div
  | #[+printPhone()]
  deleteSaid('BATTERY')
  | #[+printPhone()]
`, 'battery of 3300 mAh'
);
</script>
<div class="paragraph">
<p>You will get these 2 nice sentences:
<em>The phone has a 6 inches screen along with a battery of 3300 mAh and exists in red and in black.</em>
<em>The phone exists in red and in black, has a battery of 3300 mAh and has a 6 inches screen.</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contractions_and_gender"><a class="anchor" href="#_contractions_and_gender"></a>Contractions and gender</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s take an example in French:</p>
</div>
<script>
spawnEditor('fr_FR',
`
- var data = ['pomme', 'abricot', 'haricot', 'hibiscus', 'houblon'];
p
  eachz elt in data with { separator: ',', last_separator: 'et', begin_with_general: 'je aime', end:'!' }
    | #[+value(elt, {det:'DEFINITE'})]
`, "<p>J'aime la pomme, l'abricot, le haricot, l'hibiscus et le houblon"
);
</script>
<div class="paragraph">
<p>As you can see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>contractions have been made automatically when required like in <em>l&#8217;abricot</em> and <em>l&#8217;hibiscus</em>, but not in <em>la pomme</em>, <em>le haricot</em></p>
</li>
<li>
<p>gender of words has been found like magically: <em>la pomme</em>, <em>le haricot</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can add an adjective that will be agreed automatically:</p>
</div>
<script>
spawnEditor('fr_FR',
`- var data = ['pomme', 'abricot', 'haricot', 'bière'];
p
  eachz elt in data with { separator: ',', last_separator: 'et', begin_with_general: 'je aime', end:'!' }
    | #[+value(elt, {det:'DEFINITE', adj: 'délicieux', adjPos:'BEFORE'})]
`, "<p>J'aime la délicieuse pomme, le délicieux abricot, le délicieux haricot et la délicieuse bière"
);
</script>
</div>
</div>
<div class="sect1">
<h2 id="_synonyms_global_optimization"><a class="anchor" href="#_synonyms_global_optimization"></a>Synonyms global optimization</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s take an example where you wish to describe the situation of a client:</p>
</div>
<script>
spawnEditor('en_US',
`-
  let client = {
    lastName: 'Dupont',
    firstName: 'Andre',
    clientSince: '2016',
    status: 'married',
    profession: 'engineer'
  };

mixin client_ref(obj, params)
  | Mr #[+value(client.lastName)]
- client.ref = client_ref;

mixin client_refexpr(obj, params)
  synz
    syn
      | he
    syn
      | this client
    syn
      | #[+value(client.firstName)] #[+value(client.lastName)]
- client.refexpr = client_refexpr;

mixin profession
  | #[+value(client)]
  synz
    syn
      | is
    syn
      | practices the profession of
  | #[+value(client.profession)]

mixin clientSince
  | #[+value(client)] is client since
  | #[+value(client.clientSince)]

mixin status
  | #[+value(client)] is
  | #[+value(client.status)]

p
  itemz {separator:'.', end:'.', mix:true}
    item
       | #[+profession]
    item
       | #[+clientSince]
    item
       | #[+status]
`, 'engineer'
);
</script>
<div class="paragraph">
<p>You often get sentences like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Mr Dupont is married. This client is engineer. This client is client since 2016.</em>: repetition of <em>client</em> in <em>This client is client</em></p>
</li>
<li>
<p><em>Mr Dupont is married. Andre Dupont is engineer. Andre Dupont is client since 2016.</em>: too much <em>Dupont</em>!</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are multiple ways to tweak it, but one is to let RoseaNLG choose the best combination using <code>choosebest</code>, just adding <code>choosebest {among: 20}</code> at the right place:</p>
</div>
<script>
spawnEditor('en_US',
`-
  let client = {
    lastName: 'Dupont',
    firstName: 'Andre',
    clientSince: '2016',
    status: 'married',
    profession: 'engineer'
  };

mixin client_ref(obj, params)
  | Mr #[+value(client.lastName)]
- client.ref = client_ref;

mixin client_refexpr(obj, params)
  synz
    syn
      | he
    syn
      | this client
    syn
      | #[+value(client.firstName)] #[+value(client.lastName)]
- client.refexpr = client_refexpr;

mixin profession
  | #[+value(client)]
  synz
    syn
      | is
    syn
      | practices the profession of
  | #[+value(client.profession)]

mixin clientSince
  | #[+value(client)] is client since
  | #[+value(client.clientSince)]

mixin status
  | #[+value(client)] is
  | #[+value(client.status)]

p
  choosebest {among: 20}
    itemz {separator:'.', end:'.', mix:true}
      item
         | #[+profession]
      item
         | #[+clientSince]
      item
         | #[+status]
`, 'engineer'
);
</script>
<div class="paragraph">
<p>You will get sentences like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Mr Dupont practices the profession of engineer. He is client since 2016. He is married.</em></p>
</li>
<li>
<p><em>Mr Dupont is married. He is engineer. He is client since 2016.</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>he</code> is a stop word and is therefore, by default, not considered an issue if repeated.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_plain_punctuation"><a class="anchor" href="#_plain_punctuation"></a>Plain punctuation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With RosaeNLG:</p>
</div>
<script>
spawnEditor('en_US',
`
p
  | this
  | is
  | a sentence .
  p
    | and yes ,
    | this is another sentence
    | !
`, '<p>This is a sentence. <p>And yes, this is another sentence!</p></p>'
);
</script>
<div class="paragraph">
<p>Punctuation and capitalization is just perfect.</p>
</div>
<div class="paragraph">
<p>Only using Pug&#8217;s features, you would have:</p>
</div>
<script>
spawnEditor('en_US',
`
p
  protect
    | this
    | is
    | a sentence .
    p
      | and yes ,
      | this is another sentence
      | !
`, 'sentence'
);
</script>
<div class="paragraph">
<p>Of course, you can fine tune spacing and put capital letters where required, but this is very tedious and error prone.</p>
</div>
<div class="paragraph">
<p>And when capitalization is dynamic, it becomes even more difficult:</p>
</div>
<script>
spawnEditor('en_US',
`
mixin start
  synz {mode:'sequence'}
    syn
      | one first complete sentence.
    syn
      | or just the beginning of a sentence,


eachz i in [0,1] with {}
  p
    | #[+start]
    | and something else.
`, '<p>One first complete sentence. And something else.</p><p>Or just the beginning of a sentence, and something else.</p>'
);
</script>
<div class="paragraph">
<p><em>One first complete sentence. And something else.</em>
<em>Or just the beginning of a sentence, and something else.</em></p>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>RosaeNLG is a Sandbox Project of <a href="https://lfaidata.foundation/">LF AI &amp; Data Foundation</a>. RosaeNLG is licenced under Apache 2.0, and its documentation under CC-BY-4.0. The documentation was built with Antora using a fork of the Antora default UI licensed under MPL-2.0.</p>
</footer><script src="../../../_/js/site.js"></script>
<script src="../../../_/js/vendor/highlight.js"></script>
<script>hljs.highlightAll()</script>

<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script>

<script type="text/javascript"> 
docsearch({
  container: '#docsearch',
  appId: 'OCFRXUBY1U',
  indexName: 'rosaenlg',
  apiKey: '27e9df5252425c18d4f37735143c134b',
  searchParameters:{
    facetFilters: [
      'version:3.0.2'
    ]
  }
});
</script>
  </body>
</html>
